{
   "name": "Hardshrink(2)",
   "type": "COMPOSITE_OPERATION",
   "aliases": [
     "Shrink Function",
     "Threshold Operation"
   ],
   "inputs": [
     {
       "name": "Input",
       "primitive_name": "Input",
       "input_types_allowed": ["DECIMAL"],
       "array_allowed": true,
       "scalar_allowed": false
     },
     {
       "name": "lambda",
       "primitive_name": "Input (1)",
       "input_types_allowed": ["DECIMAL"],
       "array_allowed": true,
       "scalar_allowed": true
     }
   ],
   "outputs": [
     {
       "name": "Output",
       "primitive_name": "Output",
       "flow_state": "UNBOUND"
     }
   ],
   "description": {
       "summary": "Applies the Hard Shrinkage (Hardshrink) function element-wise.",
       "formula": "HardShrink(x)={x if x>λ, x if x<λ, 0 otherwise}",
       "parameters": {
         "lambd": {
           "description": "the λ value for the Hardshrink formulation.",
           "type": "float",
           "default": 0.5
         }
       },
       "shape": {
           "input": "(*)",
           "output": "(*)",
           "note": "The output shape is the same as the input shape."
         } 
     },
   "operations": [
     {
       "name": "Greater Than or Less Than",
       "type": "COMPOSITE_OPERATION",
       "position": { "x": 1030, "y": 386 },
       "inputs": [
         { "name": "Input", "primitive_name": "Input" },
         { "name": "lambda", "primitive_name": "Input (1)" }
       ],
       "outputs": [
         { "name": "Output", "primitive_name": "Output", "flow_state": "UNBOUND" }
       ],
       "operations": [
         {
           "name": "Broadcast Target to Shape of Array",
           "type": "COMPOSITE_OPERATION",
           "position": { "x": 431, "y": 301 },
           "inputs": [
             { "name": "Target", "primitive_name": "Target" },
             { "name": "Array", "primitive_name": "Array" }
           ],
           "outputs": [
             { "name": "Output", "primitive_name": "Output", "flow_state": "UNBOUND" }
           ],
           "operations": [
             {
               "name": "get_shape",
               "primitive_name": "get_shape",
               "type": "PRIMITIVE_OPERATION",
               "position": { "x": 601, "y": 346 },
               "inputs": [{ "name": "input", "primitive_name": "input" }],
               "outputs": [
                 { "name": "shape", "primitive_name": "shape", "flow_state": "UNBOUND" }
               ],
               "assertions": [
                 "{input}_is_array",
                 "{shape}_data_type_is_integer",
                 "{shape}_is_greater_than_or_equal_to_zero",
                 "{shape}_has_one_dimension",
                 "{input}_shape_is_{shape}"
               ]
             },
             {
               "name": "broadcast_to_shape",
               "primitive_name": "broadcast_to_shape",
               "type": "PRIMITIVE_OPERATION",
               "position": { "x": 1097, "y": 42 },
               "inputs": [
                 { "name": "target", "primitive_name": "target" },
                 { "name": "shape", "primitive_name": "shape" }
               ],
               "outputs": [
                 { "name": "result", "primitive_name": "result", "flow_state": "UNBOUND" }
               ],
               "assertions": [
                 "{shape}_data_type_is_integer",
                 "{shape}_has_one_dimension",
                 "{shape}_is_greater_than_zero",
                 "{target}_shape_size_is_less_than_or_equal_to_{shape}_size",
                 "every_dimension_size_of_{target}_is_less_than_or_equal_to_the_corresponding_value_of_array_{shape}",
                 "{result}_data_type_is_the_same_as_{target}",
                 "{result}_shape_is_{shape}",
                 "{target}_shape_size_is_less_than_or_equal_to_{result}_shape_size",
                 "every_dimension_size_of_{target}_is_less_than_or_equal_to_the_corresponding_dimension_size_of_{result}"
               ]
             }
           ]
         },
         {
           "name": "greater_than",
           "primitive_name": "greater_than",
           "type": "PRIMITIVE_OPERATION",
           "position": { "x": 1423, "y": 66 },
           "inputs": [
             { "name": "left_operand", "primitive_name": "left_operand" },
             { "name": "right_operand", "primitive_name": "right_operand" }
           ],
           "outputs": [
             { "name": "is_greater_than", "primitive_name": "is_greater_than", "flow_state": "UNBOUND" }
           ],
           "assertions": [
             "{left_operand}_data_type_is_integer_or_decimal",
             "{is_greater_than}_data_type_is_boolean",
             "{left_operand}_shape_is_the_same_as_{right_operand}",
             "{right_operand}_data_type_is_the_same_as_{left_operand}",
             "{is_greater_than}_shape_is_the_same_as_{right_operand}"
           ]
         },
         {
           "name": "Multiply by Negative One",
           "type": "COMPOSITE_OPERATION",
           "position": { "x": 1018, "y": 302 },
           "inputs": [{ "name": "Input", "primitive_name": "Input" }],
           "outputs": [
             { "name": "Output", "primitive_name": "Output", "flow_state": "UNBOUND" }
           ],
           "operations": [
             {
               "name": "Broadcast Scalar to Shape of Array",
               "type": "COMPOSITE_OPERATION",
               "position": { "x": 461, "y": 316 },
               "inputs": [
                 { "name": "Scalar", "data": -1.0, "shape": [], "type": "DECIMAL", "primitive_name": "Scalar", "flow_state": "BOOT_SOURCE" },
                 { "name": "Array", "primitive_name": "Array" }
               ],
               "outputs": [
                 { "name": "Output", "primitive_name": "Output", "flow_state": "UNBOUND" }
               ]
             }
           ]
         }
       ],
       "links": [
         { "source": { "operation": "this", "data": "Array" }, "sink": { "operation": "get_shape", "data": "input" }, "control_points": [{ "x": 427, "y": 404 }] },
         { "source": { "operation": "this", "data": "Target" }, "sink": { "operation": "broadcast_to_shape", "data": "target" }, "control_points": [] },
         { "source": { "operation": "get_shape", "data": "shape" }, "sink": { "operation": "broadcast_to_shape", "data": "shape" }, "control_points": [] },
         { "source": { "operation": "broadcast_to_shape", "data": "result" }, "sink": { "operation": "this", "data": "Output" }, "control_points": [] }
       ]
     },
     {
       "name": "logical_or",
       "primitive_name": "logical_or",
       "type": "PRIMITIVE_OPERATION",
       "position": { "x": 1855, "y": 138 },
       "inputs": [
         { "name": "condition_1", "primitive_name": "condition_1" },
         { "name": "condition_2", "primitive_name": "condition_2" }
       ],
       "outputs": [
         { "name": "new_condition", "primitive_name": "new_condition", "flow_state": "UNBOUND" }
       ],
       "assertions": [
         "{condition_1}_data_type_is_boolean",
         "{condition_2}_data_type_is_boolean",
         "{new_condition}_data_type_is_boolean",
         "{condition_1}_shape_is_the_same_as_{condition_2}",
         "{new_condition}_shape_is_the_same_as_{condition_2}"
       ]
     },
     {
       "name": "conditional_filter",
       "primitive_name": "conditional_filter",
       "type": "PRIMITIVE_OPERATION",
       "position": { "x": 2021, "y": 45 },
       "inputs": [
         { "name": "condition", "primitive_name": "condition" },
         { "name": "data_if_true", "primitive_name": "data_if_true" },
         { "name": "data_if_false", "primitive_name": "data_if_false" }
       ],
       "output_order": [1, 2, 0],
       "outputs": [
         { "name": "output_data", "primitive_name": "output_data", "flow_state": "UNBOUND" }
       ],
       "assertions": [
         "{condition}_data_type_is_boolean",
         "{condition}_shape_is_the_same_as_{data_if_true}",
         "{data_if_true}_data_type_is_the_same_as_{data_if_false}",
         "{data_if_true}_shape_is_the_same_as_{data_if_false}",
         "{output_data}_data_type_is_the_same_as_{data_if_false}",
         "{output_data}_shape_is_the_same_as_{data_if_false}"
       ]
     }
   ],
   "global_constants": [],
   "is_disabled": false
 }
 
